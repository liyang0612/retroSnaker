function start(){for(var e=0;e<entry.rows;e++){entry.boxArr[e]=new Array;for(var n=0;n<entry.cols;n++){entry.boxArr[e][n]=e*entry.cols+n;var t=document.createElement("div");entry.boxArr[e][n]==randomS[0]?(entry.snakeHead[0]=randomS[0],t.className="snake"):entry.boxArr[e][n]==randomS[1]?(t.className="food",entry.foodId=entry.boxArr[e][n]):t.className="block",t.id=e*entry.cols+n,t.style.top=20*e+"px",t.style.left=20*n+"px",entry.snakeBox.appendChild(t)}}}function move(){var e=entry.snakeHead[0];switch(0==entry.keyValueGo&&(entry.newSnakeHead=entry.snakeHead[0]),entry.oldSnakeHead=entry.snakeHead[entry.snakeHead.length-1],entry.oldsnake=entry.snakeHead,entry.keyValueGo){case 37:entry.newSnakeHead=entry.snakeHead[0]-1;break;case 38:entry.newSnakeHead=entry.snakeHead[0]-entry.cols;break;case 39:entry.newSnakeHead=entry.snakeHead[0]+1;break;case 40:entry.newSnakeHead=entry.snakeHead[0]+entry.cols}var n=copyArr(entry.snakeHead);if(entry.newSnakeHead>599||entry.newSnakeHead<0||entry.newSnakeHead%30==0&&e%30==29||entry.newSnakeHead%30==29&&e%30==0)alert("GAME OVER , 请重新开始游戏！"),clearInterval(entry.settime),reStart(),entry.foodId=randomSnake()[1];else{if(entry.foodXY.x=document.getElementById(entry.foodId).offsetLeft,entry.foodXY.y=document.getElementById(entry.foodId).offsetTop,entry.snakeHeadXY.x=document.getElementById(entry.newSnakeHead).offsetLeft,entry.snakeHeadXY.y=document.getElementById(entry.newSnakeHead).offsetTop,entry.foodXY.x==entry.snakeHeadXY.x&&entry.foodXY.y==entry.snakeHeadXY.y){var t=entry.snakeHead;t.unshift(entry.newSnakeHead);for(var a=0;a<t.length;a++)document.getElementById(t[a]).className="snake";entry.foodId=randomSnake()[1],document.getElementById(entry.foodId).className="food"}else{entry.snakeHead.pop();var t=entry.snakeHead;t.unshift(entry.newSnakeHead);for(var a=0;a<t.length;a++)document.getElementById(t[a]).className="snake";entry.oldSnakeHead!=entry.newSnakeHead&&(document.getElementById(entry.oldSnakeHead).className="block")}clearInterval(entry.settime),entry.settime=setInterval(move,entry.level)}itSelf(n),1==entry.gameover&&clearInterval(entry.settime)}function randomSnake(){for(var e=[],n=0;n<2;){var t=Math.floor(20*Math.random()*30);e[n]=t,n++}return e}function itSelf(e){for(var n=1;n<e.length;n++)if(entry.newSnakeHead==e[n])return entry.gameover=!0,alert("GAME OVER , 请重新开始游戏"),reStart(),entry.foodId=randomSnake()[1],!1}function copyArr(e){for(var n=[],t=0;t<e.length;t++)n.push(e[t]);return n}function reStart(){for(var e=0;e<entry.snakeHead.length;e++)document.getElementById(entry.snakeHead[e]).className="block";entry.snakeHead=[],entry.snakeHead[0]=randomSnake()[0],document.getElementById(entry.snakeHead[0]).className="snake"}var entry={snakeBox:document.getElementById("snake-box"),snakeHead:[],oldSnakeHead:"",newSnakeHead:"",keyValueGo:0,keyVluae:39,settime:"",rows:20,cols:30,level:350,boolStart:!1,foodId:"",snakeHeadXY:{x:0,y:0},foodXY:{x:0,y:0},boxArr:[],gameover:!1},randomS=randomSnake();start(),window.document.onkeydown=function(e){var e=e||window.event;entry.boolStart===!0&&(entry.keyValue=e.keyCode,entry.keyValue<=40&&entry.keyValue>=37&&(37==entry.keyValue&&39!=entry.keyValueGo&&(entry.keyValueGo=37),38==entry.keyValue&&40!=entry.keyValueGo&&(entry.keyValueGo=38),39==entry.keyValue&&37!=entry.keyValueGo&&(entry.keyValueGo=39),40==entry.keyValue&&38!=entry.keyValueGo&&(entry.keyValueGo=40)))},document.getElementById("start").onclick=function(){entry.boolStart===!1?move():alert("游戏已经开始了"),entry.boolStart=!0},document.getElementById("level").onclick=function(){entry.level=this.value},window.onload=function(){document.getElementById("level").value=350};